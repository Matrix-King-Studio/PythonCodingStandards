# 1. 前言

此编码风格指南主要基于 [Google Python Style Guide](https://google.github.io/styleguide/pyguide.html) [[中译版](https://zh-google-styleguide.readthedocs.io/en/latest/google-python-styleguide/contents.html)]。

这份文档存在的意义是让大家写出统一风格的代码，让项目的可维护性和可读性更好；

文档内容可能会与您的喜好冲突，请尽量用包容的心态来接受; 不合理之处，你说的都对。

在阅读本文档之前，我们假设你已经掌握了以下知识：

1. Git
2. Github
2. Python
3. Markdown

# 2. 文档

> 程序员最讨厌的 4 件事：
> 1. 写文档
> 2. 写注释
> 3. 别人不写文档
> 4. 别人不写注释

## 需求开发文档（PRD）

对于程序员来说，一个项目确定要做是从接到 PRD 开始的，一个定要搞清楚这个项目要做什么，有哪些模块，每个模块有哪些功能。

PRD 的确定过程我们一定要参与讨论，建议找一个懂技术的杠精来，作为红队疯狂挑刺，我们可以怀着包容的心跟他辩论。

## 系统功能图

## 系统架构图

## 功能时序图

## 提交说明

Git 的 Commit Message（提交说明）也是一种日志。

在 commit 之前一定要想一下哪里还有不完善的地方，避免多次 commit。

在 commit 的时候多花 5 秒钟写一个有明确含义的 message 绝对能让你避免很多麻烦。

## 更新日志

> 更新日志不是 git 日志的堆砌物。

# 3. 质量保证工具

安装代码质量检查的依赖库

```shell
pip install requirements_code_quality.txt
```

## PyLint

PyLint 可以对单个文件进行检查，并且输出代码中不符合规范的代码行，还能够给出打分。

例如对于下面这个 Python 文件：
```python
def main():
    print("Hello, World!")


if __name__ == "__main__":
    main()
```

运行下面的命令：
```
> pylint main.py
************* Module main
main.py:1:0: C0114: Missing module docstring (missing-module-docstring)
main.py:1:0: C0116: Missing function or method docstring (missing-function-docstring)

-----------------------------------
Your code has been rated at 5.00/10
```

例如这里说我们的 main() 函数没有写函数文档，我们给它加上函数文档之后，再运行 PyLint 命令：
```
> pylint main.py
************* Module main
main.py:1:0: C0114: Missing module docstring (missing-module-docstring)

------------------------------------------------------------------
Your code has been rated at 7.50/10 (previous run: 5.00/10, +2.50)
```

可以发现 PyLint 给出的提示变少了，而且分数也提高了。

## pre-commit

## git-pylint-commit-hook

在`.git/hooks`文件夹下创建`pre-commit`文件，并填入如下内容：
```
git-pylint-commit-hook --limit=9.0
```

git-pylint-commit-hook 有几个参数可以配置：
```
--limit LIMIT        分数限制，分数较低的文件将停止提交。默认值：8.0
--pylint PYLINT      pylint 可执行文件的路径。默认值：pylint
--pylintrc PYLINTRC  pylintrc 文件的路径，通过这个文件可以自定义检查规则。
--pylint-params      自定义要添加到pylint命令中的pylint参数
--version            打印当前版本号
```


# 参考资料

- [pylint+pre-commit+commit-msg](https://blog.csdn.net/zang_debby/article/details/126830304)
- [git和pylint结合自动检测规范 (git-pylint-commit-hook）](https://blog.csdn.net/ypgsh/article/details/110139816)
- [cannot import name 'find_pylintrc' from 'pylint.config' #444](https://github.com/microsoft/vscode-pylint/issues/444)
- [find_pylintrc removed in 3.0 #9105](https://github.com/pylint-dev/pylint/issues/9105)
- [Docs » Welcome to git-pylint-commit-hook’s documentation!](https://git-pylint-commit-hook.readthedocs.io/en/latest/)
- [好好学Git：Git pre-commit 代码质量检查](https://www.voidking.com/dev-git-pre-commit/)
- [好好学Git：Git pre-commit 代码质量检查]()
- []()
- [如何维护更新日志](https://keepachangelog.com/zh-CN/1.1.0/)
- []()
